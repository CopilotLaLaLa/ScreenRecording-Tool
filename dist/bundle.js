(()=>{"use strict";var e,t,n,r,o,i,a,s,c,d,u,l,h,f,p,m,v,y,g,k={386:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),document.getElementById("video");var n=document.getElementById("record-btn"),r=document.getElementById("end-btn"),o=document.getElementById("clear-btn"),i=document.getElementById("download-btn"),a=document.getElementById("pause-btn"),s=document.getElementById("resume-btn"),c=document.getElementById("recording-sta"),d=document.getElementById("pause-sta");t.recordStart=function(){var e=this;n.classList.remove("showBtn"),c.classList.add("showBtn"),a.classList.add("showBtn"),r.classList.add("showBtn"),a.addEventListener("click",e.pause.bind(e,(function(){c.classList.remove("showBtn"),d.classList.add("showBtn"),a.classList.remove("showBtn"),s.classList.add("showBtn")}))),s.addEventListener("click",e.resume.bind(e,(function(){c.classList.add("showBtn"),d.classList.remove("showBtn"),a.classList.add("showBtn"),s.classList.remove("showBtn")}))),r.addEventListener("click",e.stop.bind(e))},t.recordEnd=function(){var e=this,t=this,r=".btn-bar",a=(r=document.querySelector(r).childNodes,!0),s=!1,c=void 0;try{for(var d,u=r[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var l=d.value;1==l.nodeType&&l.classList.remove("showBtn")}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}function h(){var e=document.createElement("a");e.href=t.url,e.download="video.webm",e.click()}o.classList.add("showBtn"),i.classList.add("showBtn"),o.addEventListener("click",(function(){e.reset(),e.videoDom.src=null,e.videoDom.controls=!1,e.videoDom.removeAttribute("src"),n.classList.add("showBtn"),o.classList.remove("showBtn"),i.classList.remove("showBtn"),i.removeEventListener("click",h)})),i.addEventListener("click",h)}},838:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t,n){t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t)}(r,[{key:"init",value:function(){this.mask.style.position="fixed",this.mask.style.left="0",this.mask.style.top="0",this.mask.style.width="100vw",this.mask.style.height="100vh",this.mask.style.background="rgba(0,0,0,0.48)",this.mask.style.zIndex="2147483640",this.countNum.style.position="fixed",this.countNum.style.left="calc(50% - 19rem)",this.countNum.style.top="calc(50% - 19rem)",this.countNum.style.width="38rem",this.countNum.style.height="38rem",this.countNum.style.lineHeight="38rem",this.countNum.style.background="red",this.countNum.style.borderRadius="50%",this.countNum.style.color="white",this.countNum.style.fontSize="20rem",this.countNum.style.textAlign="center",this.countNum.style.zIndex="2147483650",this.countNum.style.userSelect="none"}},{key:"countDown",value:async function(e){var t=this;return this.domShow(e),new Promise((function(n,r){t.counter=setInterval((function(){0==--e?(t.stopCount(),n()):t.countNum.innerText=e}),1e3)}))}},{key:"stopCount",value:function(){this.counter&&clearInterval(this.counter),this.parentDom.removeChild(this.countNum.parentNode)}},{key:"domShow",value:function(e){this.countNum.innerText=e,this.mask.appendChild(this.countNum),this.parentDom.appendChild(this.mask)}}]);var n=r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.counter=null,this.parentDom=document.querySelector("html"),this.countNum=document.createElement("div"),this.mask=document.createElement("mask"),this.init()}t.default=n},16:(e,t,n)=>{var r=(r=n(41))&&r.__esModule?r:{default:r},o=(n=n(386),document.getElementById("video")),i=document.getElementById("record-btn"),a=new r.default(o,n.recordStart,n.recordEnd);i.addEventListener("click",(async function(){await a.record().catch((function(e){return console.log(e)}))}))},41:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var o=(n=n(838))&&n.__esModule?n:{default:n};function i(e,t,n){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.startFn=t,this.endFn=n,this.url=null,this.tracks=[],this.blob=null,this.stream=null,this.audioTracks=[],this.audioStream=null,this.mediaRecorder=null,this.videoDom=e||null,this.displayConstraints={video:!0,audio:{echoCancellation:!0,noiseSuppression:!0,channelCount:!0,sampleRate:44100}},this.userConstraints={video:!1,audio:{autoGainControl:!0,channelCount:!0,echoCancellation:!0,googAutoGainControl:!0,noiseSuppression:!0}},this.options={mimeType:"video/webm; codecs = vp8"}}!function(e,t,n){t&&r(e.prototype,t)}(i,[{key:"mixer",value:function(e,t){var n=new AudioContext,r=n.createMediaStreamDestination();return 0<e.getAudioTracks().length&&n.createMediaStreamSource(e).connect(r),0<t.getAudioTracks().length&&n.createMediaStreamSource(t).connect(r),e=r.stream.getTracks(),new MediaStream(e)}},{key:"record",value:async function(){var e=this,t=new o.default;return new Promise((function(n,r){function o(){t.stopCount(),r()}navigator.mediaDevices.getDisplayMedia(e.displayConstraints).then((function(r){e.stream=r,navigator.mediaDevices.getUserMedia(e.userConstraints).then((function(r){e.stream.getVideoTracks()[0].addEventListener("ended",o),t.countDown(3).then((function(){var t;e.stream.getVideoTracks()[0].removeEventListener("ended",o),e.stream.getVideoTracks()[0].addEventListener("ended",(function(){e.stop()})),e.audioStream=r,0!=e.stream.getAudioTracks().length?(t=e.mixer(e.stream,r),e.audioTracks.push(e.stream.getAudioTracks()[0]),e.audioTracks.push(r.getAudioTracks()[0]),e.stream.removeTrack(e.stream.getAudioTracks()[0]),e.stream.addTrack(t.getTracks()[0])):e.stream.addTrack(r.getTracks()[0]),e.start(),n(e),e.videoDom&&e.live(),e.startFn&&e.startFn()})).catch((function(e){return console.log(e)}))})).catch((function(){e.stream.getVideoTracks()[0].addEventListener("ended",o),t.countDown(3).then((function(){e.stream.getVideoTracks()[0].removeEventListener("ended",o),e.stream.getVideoTracks()[0].addEventListener("ended",(function(){e.stop()})),e.start(),n(e),e.videoDom&&e.live(),e.startFn&&e.startFn()})).catch((function(e){return console.log(e)}))}))})).catch((function(){r("用户取消分享屏幕")}))}))}},{key:"start",value:function(){var e=this,t=(this.mediaRecorder=new MediaRecorder(this.stream,this.options),this.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size&&0<t.data.size&&e.tracks.push(t.data)},this);this.mediaRecorder.addEventListener("stop",(function(){t.blob=new Blob(t.tracks,{type:t.tracks[0].type}),t.url=URL.createObjectURL(t.blob),t.videoDom&&t.replay(),t.endFn&&t.endFn()})),this.mediaRecorder.start()}},{key:"live",value:function(){this.videoDom.srcObject=this.stream,this.videoDom.muted=!0,this.videoDom.play()}},{key:"stop",value:function(){this.audioTracks&&this.audioTracks.forEach((function(e){return e.stop()})),this.stream.getTracks().forEach((function(e){return e.stop()}))}},{key:"replay",value:function(){this.videoDom.src=this.url,this.videoDom.srcObject=null,this.videoDom.controls=!0,this.videoDom.muted=!1,this.videoDom.play()}},{key:"pause",value:function(e){this.mediaRecorder.pause(),this.videoDom.pause(),e&&e()}},{key:"resume",value:function(e){this.mediaRecorder.resume(),this.videoDom.play(),e&&e()}},{key:"reset",value:function(){this.url=null,this.tracks=[],this.blob=null,this.stream=null,this.audioStream=null,this.audioTracks=[],this.mediaRecorder=null}}]),n=i,t.default=n}},b={};function w(e){var t=b[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}t=b[e]={exports:{}};try{var n={id:e,module:t,factory:k[e],require:w};w.i.forEach((function(e){e(n)})),t=n.module,n.factory.call(t.exports,t,t.exports,n.require)}catch(e){throw t.error=e}return t.exports}function E(e){d=e;for(var t=[],n=0;n<c.length;n++)t[n]=c[n].call(null,e);return Promise.all(t)}function D(){0==--u&&E("ready").then((function(){if(0===u){var e=l;l=[];for(var t=0;t<e.length;t++)e[t]()}}))}function _(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return E("check").then(w.hmrM).then((function(t){return t?E("prepare").then((function(){var n=[];return r=[],Promise.all(Object.keys(w.hmrC).reduce((function(e,o){return w.hmrC[o](t.c,t.r,t.m,e,r,n),e}),[])).then((function(){return t=function(){return e?L(e):E("ready").then((function(){return n}))},0===u?t():new Promise((function(e){l.push((function(){e(t())}))}));var t}))})):E(T()?"ready":"idle").then((function(){return null}))}))}function I(e){return"ready"!==d?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+d+")")})):L(e)}function L(e){e=e||{},T();var t=r.map((function(t){return t(e)})),n=(r=void 0,t.map((function(e){return e.error})).filter(Boolean));if(0<n.length)return E("abort").then((function(){throw n[0]}));function i(e){a=a||e}var a,s=E("dispose"),c=(t.forEach((function(e){e.dispose&&e.dispose()})),E("apply")),d=[];return t.forEach((function(e){if(e.apply){var t=e.apply(i);if(t)for(var n=0;n<t.length;n++)d.push(t[n])}})),Promise.all([s,c]).then((function(){return a?E("fail").then((function(){throw a})):o?L(e).then((function(e){return d.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):E("idle").then((function(){return d}))}))}function T(){return o&&(r=r||[],Object.keys(w.hmrI).forEach((function(e){o.forEach((function(t){w.hmrI[e](t,r)}))})),o=void 0,1)}function B(e,t){return h=t,new Promise(((t,n)=>{g[e]=t,t=w.p+w.hu(e);var r=new Error;w.l(t,(t=>{var o;g[e]&&(g[e]=void 0,o=t&&("load"===t.type?"missing":t.type),t=t&&t.target&&t.target.src,r.message="Loading hot update chunk "+e+" failed.\n("+o+": "+t+")",r.name="ChunkLoadError",r.type=o,r.request=t,n(r))}))}))}function x(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}function n(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")}w.f&&delete w.f.jsonpHmr,f=void 0;var r,o={},i=[],a={};for(r in p)if(w.o(p,r)){var s=p[r],c=s?function(e){for(var n=[e],r={},o=n.map((function(e){return{chain:[e],id:e}}));0<o.length;){var i=o.pop(),a=i.id,s=i.chain,c=w.c[a];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(c.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var d=0;d<c.parents.length;d++){var u=c.parents[d],l=w.c[u];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([u]),moduleId:a,parentId:u};-1===n.indexOf(u)&&(l.hot._acceptedDependencies[a]?(r[u]||(r[u]=[]),t(r[u],[a])):(delete r[u],n.push(u),o.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:r}}(r):{type:"disposed",moduleId:r},d=!1,u=!1,l=!1,h="";switch(c.chain&&(h="\nUpdate propagation: "+c.chain.join(" -> ")),c.type){case"self-declined":e.onDeclined&&e.onDeclined(c),e.ignoreDeclined||(d=new Error("Aborted because of self decline: "+c.moduleId+h));break;case"declined":e.onDeclined&&e.onDeclined(c),e.ignoreDeclined||(d=new Error("Aborted because of declined dependency: "+c.moduleId+" in "+c.parentId+h));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(c),e.ignoreUnaccepted||(d=new Error("Aborted because "+r+" is not accepted"+h));break;case"accepted":e.onAccepted&&e.onAccepted(c),u=!0;break;case"disposed":e.onDisposed&&e.onDisposed(c),l=!0;break;default:throw new Error("Unexception type "+c.type)}if(d)return{error:d};if(u)for(r in a[r]=s,t(i,c.outdatedModules),c.outdatedDependencies)w.o(c.outdatedDependencies,r)&&(o[r]||(o[r]=[]),t(o[r],c.outdatedDependencies[r]));l&&(t(i,[c.moduleId]),a[r]=n)}p=void 0;for(var g,k=[],b=0;b<i.length;b++){var E=i[b],D=w.c[E];D&&(D.hot._selfAccepted||D.hot._main)&&a[E]!==n&&!D.hot._selfInvalidated&&k.push({module:E,require:D.hot._requireSelf,errorHandler:D.hot._selfAccepted})}return{dispose:function(){m.forEach((function(e){delete y[e]})),m=void 0;for(var e,t,n,r=i.slice();0<r.length;){var a=r.pop(),s=w.c[a];if(s){var c={},d=s.hot._disposeHandlers;for(b=0;b<d.length;b++)d[b].call(null,c);for(w.hmrD[a]=c,s.hot.active=!1,delete w.c[a],delete o[a],b=0;b<s.children.length;b++){var u=w.c[s.children[b]];u&&0<=(e=u.parents.indexOf(a))&&u.parents.splice(e,1)}}}for(n in o)if(w.o(o,n)&&(s=w.c[n]))for(g=o[n],b=0;b<g.length;b++)t=g[b],0<=(e=s.children.indexOf(t))&&s.children.splice(e,1)},apply:function(t){for(var n in a)w.o(a,n)&&(w.m[n]=a[n]);for(var r,s=0;s<v.length;s++)v[s](w);for(r in o)if(w.o(o,r)){var c=w.c[r];if(c){g=o[r];for(var d=[],u=[],l=[],h=0;h<g.length;h++){var f=g[h],p=c.hot._acceptedDependencies[f],m=c.hot._acceptedErrorHandlers[f];p&&-1===d.indexOf(p)&&(d.push(p),u.push(m),l.push(f))}for(var y=0;y<d.length;y++)try{d[y].call(null,g)}catch(s){if("function"==typeof u[y])try{u[y](s,{moduleId:r,dependencyId:l[y]})}catch(n){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:r,dependencyId:l[y],error:n,originalError:s}),e.ignoreErrored||(t(n),t(s))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:r,dependencyId:l[y],error:s}),e.ignoreErrored||t(s)}}}for(var b=0;b<k.length;b++){var E=k[b],D=E.module;try{E.require(D)}catch(s){if("function"==typeof E.errorHandler)try{E.errorHandler(s,{moduleId:D,module:w.c[D]})}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:D,error:n,originalError:s}),e.ignoreErrored||(t(n),t(s))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:D,error:s}),e.ignoreErrored||t(s)}}return i}}}w.m=k,w.c=b,w.i=[],w.hu=e=>e+"."+w.h()+".hot-update.js",w.hmrF=()=>"main."+w.h()+".hot-update.json",w.h=()=>"ed76b68b8902e9ea586d",w.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="screenrecording:",w.l=(n,r,o,i)=>{if(e[n])e[n].push(r);else{var a,s;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,w.nc&&a.setAttribute("nonce",w.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[r],r=(t,r)=>{a.onerror=a.onload=null,clearTimeout(l);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)};var l=setTimeout(r.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=r.bind(null,a.onerror),a.onload=r.bind(null,a.onload),s&&document.head.appendChild(a)}},a=w.c,s=[],c=[],d="idle",u=0,l=[],w.hmrD=i={},w.i.push((function(e){var t,l,h,f,p=e.module,m=function(e,t){var r=a[t];if(!r)return e;function o(o){var i;return r.hot.active?(a[o]?-1===(i=a[o].parents).indexOf(t)&&i.push(t):(s=[t],n=o),-1===r.children.indexOf(o)&&r.children.push(o)):(console.warn("[HMR] unexpected require("+o+") from disposed module "+t),s=[]),e(o)}for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&"e"!==i&&Object.defineProperty(o,i,function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n}}}(i));return o.e=function(t){var n=e.e(t);switch(d){case"ready":E("prepare");case"prepare":return u++,n.then(D,D),n;default:return n}},o}(e.require,e.id);p.hot=(t=e.id,l=p,f={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:h=n!==t,_requireSelf:function(){s=l.parents.slice(),n=h?void 0:t,w(t)},active:!(n=void 0),accept:function(e,t,n){if(void 0===e)f._selfAccepted=!0;else if("function"==typeof e)f._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)f._acceptedDependencies[e[r]]=t||function(){},f._acceptedErrorHandlers[e[r]]=n;else f._acceptedDependencies[e]=t||function(){},f._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)f._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)f._declinedDependencies[e[t]]=!0;else f._declinedDependencies[e]=!0},dispose:function(e){f._disposeHandlers.push(e)},addDisposeHandler:function(e){f._disposeHandlers.push(e)},removeDisposeHandler:function(e){0<=(e=f._disposeHandlers.indexOf(e))&&f._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,d){case"idle":r=[],Object.keys(w.hmrI).forEach((function(e){w.hmrI[e](t,r)})),E("ready");break;case"ready":Object.keys(w.hmrI).forEach((function(e){w.hmrI[e](t,r)}));break;case"prepare":case"check":case"dispose":case"apply":(o=o||[]).push(t)}},check:_,apply:I,status:function(e){if(!e)return d;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){0<=(e=c.indexOf(e))&&c.splice(e,1)},data:i[t]}),p.parents=s,p.children=[],s=[],e.require=m})),w.hmrC={},w.hmrI={},w.p="./",y=w.hmrS_jsonp=w.hmrS_jsonp||{179:0},g={},self.webpackHotUpdatescreenrecording=(e,t,n)=>{for(var r in t)w.o(t,r)&&(p[r]=t[r],h&&h.push(r));n&&v.push(n),g[e]&&(g[e](),g[e]=void 0)},w.hmrI.jsonp=function(e,t){p||(p={},v=[],m=[],t.push(x)),w.o(p,e)||(p[e]=w.m[e])},w.hmrC.jsonp=function(e,t,n,r,o,i){o.push(x),f={},m=t,p=n.reduce((function(e,t){return e[t]=!1,e}),{}),v=[],e.forEach((function(e){w.o(y,e)&&void 0!==y[e]?(r.push(B(e,i)),f[e]=!0):f[e]=!1})),w.f&&(w.f.jsonpHmr=function(e,t){f&&w.o(f,e)&&!f[e]&&(t.push(B(e)),f[e]=!0)})},w.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(w.p+w.hmrF()).then((e=>{if(404!==e.status){if(e.ok)return e.json();throw new Error("Failed to fetch update manifest "+e.statusText)}}))},w(16)})();